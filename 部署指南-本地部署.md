# 🚀 NOFX 本地部署完整指南

本指南将一步步教您如何在本地部署 NOFX AI 交易系统。

---

## 📋 目录

1. [前置要求检查](#前置要求检查)
2. [安装 Docker（如果未安装）](#安装-docker如果未安装)
3. [获取必要的 API 密钥](#获取必要的-api-密钥)
4. [准备配置文件](#准备配置文件)
5. [启动系统](#启动系统)
6. [通过 Web 界面配置](#通过-web-界面配置)
7. [验证部署](#验证部署)
8. [常见问题解决](#常见问题解决)

---

## 前置要求检查

### 1. 检查 Docker 是否已安装

打开终端（Windows: PowerShell 或 CMD，macOS/Linux: Terminal），运行：

```bash
docker --version
docker compose version
```

**预期输出：**
```
Docker version 24.0.0 or higher
Docker Compose version v2.20.0 or higher
```

### 2. 检查 Git 是否已安装

```bash
git --version
```

**如果没有安装，请先安装：**
- **Windows**: 下载 [Git for Windows](https://git-scm.com/download/win)
- **macOS**: `brew install git` 或从官网下载
- **Linux**: `sudo apt install git` (Ubuntu/Debian) 或使用系统包管理器

---

## 安装 Docker（如果未安装）

### Windows 10/11

1. **下载 Docker Desktop**
   - 访问：https://www.docker.com/products/docker-desktop/
   - 点击 "Download for Windows"
   - 下载安装包（约 500MB）

2. **安装 Docker Desktop**
   - 双击安装包运行
   - 勾选 "Use WSL 2 instead of Hyper-V"（推荐）
   - 完成安装后重启电脑

3. **验证安装**
   - 打开 Docker Desktop（首次启动可能需要几分钟）
   - 打开 PowerShell，运行：
   ```bash
   docker --version
   docker compose version
   ```

### macOS

1. **下载 Docker Desktop**
   - 访问：https://www.docker.com/products/docker-desktop/
   - 点击 "Download for Mac"
   - 根据芯片选择（Intel 或 Apple Silicon）

2. **安装**
   - 打开下载的 `.dmg` 文件
   - 将 Docker 拖到 Applications 文件夹
   - 从 Applications 启动 Docker Desktop

3. **验证**
   ```bash
   docker --version
   docker compose version
   ```

### Linux (Ubuntu/Debian)

```bash
# 1. 安装 Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# 2. 将当前用户加入 docker 组（避免每次使用 sudo）
sudo usermod -aG docker $USER
newgrp docker

# 3. 验证安装
docker --version
docker compose version
```

---

## 获取必要的 API 密钥

### 步骤 1：获取 AI API 密钥（二选一）

#### 选项 A：DeepSeek（推荐新手）

**为什么选择 DeepSeek？**
- 💰 价格便宜（约为 GPT-4 的 1/10）
- 🚀 响应速度快
- 🎯 交易决策质量优秀
- 🌍 全球可用，无需 VPN

**获取步骤：**

1. 访问 DeepSeek 平台：https://platform.deepseek.com
2. 注册账号（使用邮箱或手机号）
3. 完成邮箱/手机验证
4. 充值账户
   - 最低：约 5 美元
   - 推荐：20-50 美元用于测试
5. 创建 API 密钥
   - 进入 "API Keys" 页面
   - 点击 "Create New Key"
   - **立即复制并保存密钥**（格式：`sk-xxxxxxxxxxxxx`）
   - ⚠️ **重要**：密钥只会显示一次，丢失无法找回！

**定价信息**：约 $0.14 每 100 万 token（非常便宜！）

#### 选项 B：Qwen（阿里云）

**获取步骤：**

1. 访问：https://dashscope.console.aliyun.com
2. 注册阿里云账号
3. 开通 DashScope 服务
4. 创建 API 密钥
   - 进入 API 密钥管理
   - 创建新密钥
   - 复制并保存（格式：`sk-xxxxxxxxxxxxx`）

**注意**：可能需要中国手机号注册

---

### 步骤 2：获取交易所 API 密钥（三选一）

#### 选项 A：Binance（币安）（推荐）

**注册币安账户（使用推荐链接可节省手续费）：**

🎁 [注册币安 - 获得手续费折扣](https://www.binance.com/join?ref=TINKLEVIP)

**创建 API 密钥步骤：**

1. **完成注册和 KYC 认证**
   - 注册账户
   - 完成 KYC 身份验证（期货交易必需）

2. **开启期货账户**
   - 登录币安首页
   - 点击 "衍生品" → "USD-M 期货"
   - 点击 "立即开通"

3. **创建 API 密钥**
   - 进入 "账户" → "API 管理"
   - 点击 "创建 API"
   - 输入标签名称（如：NOFX-Trading）
   - **启用权限**：
     - ✅ **必须勾选**：启用期货（Futures）
     - ❌ **不要勾选**：提现权限（安全考虑）
   - 复制并保存：
     - **API Key**（格式：`abc123xyz...`）
     - **Secret Key**（格式：`xyz789abc...`）
   - ⚠️ **安全建议**：设置 IP 白名单（限制只能从您的 IP 访问）

4. **费率优惠**
   - 使用推荐链接注册可获得：
     - ✅ 现货交易：最高 30% 手续费折扣
     - ✅ 期货交易：最高 30% 手续费折扣
     - ✅ 永久有效

#### 选项 B：Hyperliquid（去中心化交易所）

**特点：**
- ✅ 高性能去中心化期货交易所
- ✅ 无需 API 密钥，只需以太坊私钥
- ✅ 支持主网和测试网
- ✅ 无需 KYC

**获取步骤：**

1. **准备以太坊钱包**
   - 使用 MetaMask 或其他以太坊钱包
   - 导出私钥（⚠️ 安全警告：使用专用钱包，不要用主钱包）

2. **准备私钥**
   - 在 MetaMask 中导出私钥
   - **移除 `0x` 前缀**
   - 例如：如果私钥是 `0xabc123...`，则使用 `abc123...`

3. **充值到 Hyperliquid**
   - 访问：https://hyperliquid.xyz
   - 使用 MetaMask 连接钱包
   - 充值资金到 Hyperliquid

**需要的配置信息：**
- `hyperliquid_private_key`: 以太坊私钥（不含 0x）
- `hyperliquid_wallet_addr`: 以太坊钱包地址

#### 选项 C：Aster DEX（币安兼容的去中心化交易所）

**特点：**
- ✅ 币安风格 API（易于迁移）
- ✅ Web3 钱包认证
- ✅ 低手续费
- ✅ 多链支持（ETH, BSC, Polygon）

**获取步骤：**

1. **注册 Aster 账户**
   - 访问：[Aster 推荐链接](https://www.asterdex.com/en/referral/fdfc0e)（获得手续费折扣）

2. **创建 API 钱包**
   - 访问：[Aster API 钱包](https://www.asterdex.com/en/api-wallet)
   - 连接主钱包（MetaMask、WalletConnect 等）
   - 点击 "Create API Wallet"
   - **立即保存以下 3 项信息**：
     - Main Wallet address (User)
     - API Wallet address (Signer)
     - API Wallet Private Key（⚠️ 只显示一次！）

**需要的配置信息：**
- `aster_user`: 主钱包地址
- `aster_signer`: API 钱包地址
- `aster_private_key`: API 钱包私钥（不含 0x）

---

## 准备配置文件

### 步骤 1：克隆项目

打开终端，运行：

```bash
# 进入您想要安装的目录
cd E:\nofx  # 或您选择的其他目录

# 克隆项目（如果还没有）
git clone https://github.com/tinkle-community/nofx.git
cd nofx
```

或者如果您已经在项目目录中：

```bash
cd E:\nofx\nofx-dev
```

### 步骤 2：复制配置文件模板

```bash
# Windows PowerShell
Copy-Item config.json.example config.json

# macOS/Linux
cp config.json.example config.json
```

### 步骤 3：编辑配置文件

使用任何文本编辑器打开 `config.json`：

**Windows:**
```powershell
notepad config.json
# 或使用 VS Code
code config.json
```

**macOS/Linux:**
```bash
nano config.json
# 或
vim config.json
```

### 步骤 4：配置基本设置

打开 `config.json` 后，您会看到类似以下内容：

```json
{
  "admin_mode": true,
  "leverage": {
    "btc_eth_leverage": 5,
    "altcoin_leverage": 5
  },
  "use_default_coins": true,
  "default_coins": [
    "BTCUSDT",
    "ETHUSDT",
    "SOLUSDT",
    "BNBUSDT",
    "XRPUSDT",
    "DOGEUSDT",
    "ADAUSDT",
    "HYPEUSDT"
  ],
  "api_server_port": 8080,
  "max_daily_loss": 10.0,
  "max_drawdown": 20.0,
  "stop_trading_minutes": 60,
  "jwt_secret": "Qk0kAa+d0iIEzXVHXbNbm+UaN3RNabmWtH8rDWZ5OPf+4GX8pBflAHodfpbipVMyrw1fsDanHsNBjhgbDeK9Jg=="
}
```

**必须配置的项目：**

1. **`jwt_secret`**（重要！用于用户认证安全）
   - 生成一个强随机字符串
   - **Windows PowerShell:**
     ```powershell
     [Convert]::ToBase64String([System.Security.Cryptography.RandomNumberGenerator]::GetBytes(48))
     ```
   - **macOS/Linux:**
     ```bash
     openssl rand -base64 64
     ```
   - 将生成的字符串替换 `jwt_secret` 的值
   - **要求**：至少 32 位，推荐 64 位以上

2. **`leverage`**（杠杆设置）
   - `btc_eth_leverage`: BTC 和 ETH 的最大杠杆（推荐：5，安全）
   - `altcoin_leverage`: 其他币种的最大杠杆（推荐：5，安全）
   - ⚠️ **重要**：如果您使用币安子账户，最大杠杆只能是 5x

3. **`api_server_port`**（可选）
   - 默认：8080
   - 如果端口被占用，可以改为其他端口（如 8081）

**其他设置说明：**
- `admin_mode`: 管理员模式（保持 `true`）
- `use_default_coins`: 使用默认币种列表（推荐 `true`）
- `default_coins`: 默认交易币种列表（可通过 Web 界面修改）
- `max_daily_loss`: 最大日亏损百分比（10.0 = 10%）
- `max_drawdown`: 最大回撤百分比（20.0 = 20%）
- `stop_trading_minutes`: 触发风控后停止交易的时间（分钟）

**保存配置文件！**

---

## 启动系统

### 步骤 1：检查启动脚本权限（macOS/Linux）

如果您在 macOS 或 Linux 上，需要给启动脚本添加执行权限：

```bash
chmod +x start.sh
```

Windows 用户跳过此步骤。

### 步骤 2：启动系统

**推荐方式：使用启动脚本**

```bash
# 构建并启动（首次运行或更新后）
./start.sh start --build

# 后续启动（不重新构建）
./start.sh start
```

**或者直接使用 Docker Compose：**

```bash
# 首次运行或更新后
docker compose up -d --build

# 后续启动
docker compose up -d
```

### 步骤 3：等待服务启动

启动过程可能需要 1-3 分钟，特别是首次运行时需要：
- 下载 Docker 镜像
- 构建前端应用
- 初始化数据库

**查看启动日志：**

```bash
# 查看所有服务日志
docker compose logs -f

# 只查看后端日志
docker compose logs -f nofx

# 只查看前端日志
docker compose logs -f nofx-frontend
```

**成功启动的标志：**
- ✅ 看到 "服务已启动！" 消息
- ✅ 日志中没有红色错误信息
- ✅ 显示 "Web 界面: 

---

## 通过 Web 界面配置

### 步骤 1：访问 Web 界面

打开浏览器，访问：

**🌐 http://localhost:4001**

### 步骤 2：注册账户

首次访问需要注册：

1. 点击 "注册" 或 "Sign Up"
2. 输入：
   - 用户名
   - 邮箱
   - 密码（至少 8 位）
3. 点击 "注册"
4. 注册成功后自动登录

### 步骤 3：配置 AI 模型

1. **点击 "AI模型配置" 按钮**
2. **选择要启用的模型**：
   - DeepSeek（如果选择了 DeepSeek）
   - Qwen（如果选择了 Qwen）
3. **输入 API 密钥**：
   - 粘贴之前获取的 AI API 密钥
4. **保存配置**

**验证：**
- 确保显示 "已启用" 状态
- 确保 API 密钥格式正确（通常以 `sk-` 开头）

### 步骤 4：配置交易所

1. **点击 "交易所配置" 按钮**
2. **选择要启用的交易所**：
   - Binance（如果选择了币安）
   - Hyperliquid（如果选择了 Hyperliquid）
   - Aster DEX（如果选择了 Aster）
3. **输入相应的凭证**：

   **如果选择 Binance：**
   - API Key
   - Secret Key

   **如果选择 Hyperliquid：**
   - Private Key（不含 0x）
   - Wallet Address

   **如果选择 Aster DEX：**
   - User（主钱包地址）
   - Signer（API 钱包地址）
   - Private Key（API 钱包私钥，不含 0x）

4. **保存配置**

**验证：**
- 确保显示 "已启用" 状态
- 确保所有字段都已填写

### 步骤 5：创建交易员

1. **点击 "创建交易员" 按钮**
2. **填写信息**：
   - **交易员名称**：例如 "My DeepSeek Trader"
   - **AI 模型**：选择之前配置的模型（DeepSeek 或 Qwen）
   - **交易所**：选择之前配置的交易所（Binance/Hyperliquid/Aster）
   - **初始余额**：用于计算盈亏的起始金额（例如：1000.0）
   - **扫描间隔（分钟）**：AI 做决策的间隔（推荐：3-5 分钟）
3. **点击 "创建"**

### 步骤 6：配置交易币种（可选）

默认情况下，系统使用内置的主流币种列表。如果需要自定义：

1. 在交易员配置中
2. 选择或添加要交易的币种
3. 保存配置

### 步骤 7：启动交易员

1. **在交易员列表中，找到您创建的交易员**
2. **点击 "启动" 按钮**
3. **确认启动**

**启动后：**
- 交易员开始运行
- AI 将每隔设定时间（例如 3 分钟）进行一次市场分析
- 您可以实时查看：
  - 账户余额
  - 持仓情况
  - AI 决策日志
  - 盈亏曲线

---

## 验证部署

### 检查系统状态

```bash
# 查看服务状态
./start.sh status

# 或
docker compose ps
```

**预期输出：**
- 两个容器都在运行（nofx 和 nofx-frontend）
- 状态显示 "Up" 或 "running"

### 检查健康状态

打开浏览器访问：

```
http://localhost:8080/api/health
```

**预期响应：**
```json
{"status":"ok"}
```

### 检查 Web 界面

访问：
```
http://localhost:4001
```

**应该看到：**
- ✅ 登录/注册页面或主界面
- ✅ 没有错误提示
- ✅ 可以正常访问各个页面

### 检查后端日志

```bash
# 查看后端日志
docker compose logs nofx | tail -50
```

**应该看到：**
- ✅ 没有红色错误信息
- ✅ 显示 "API服务器启动在 http://localhost:8080"
- ✅ 显示数据库初始化成功

---

## 常见问题解决

### 问题 1：Docker Desktop 未运行或权限不足（Windows）

**错误信息 A：**
```
unable to get image 'xxx': error during connect: in the default daemon configuration on Windows, 
the docker client must be run with elevated privileges to connect: 
Get "http://%2F%2F.%2Fpipe%2Fdocker_engine/v1.51/...": 
open //./pipe/docker_engine: The system cannot find the file specified.
```

**错误信息 B：**
```
request returned 500 Internal Server Error for API route and version 
http://%2F%2F.%2Fpipe%2FdockerDesktopLinuxEngine/v1.51/containers/json, 
check if the server supports the requested API version

error during connect: Get "http://%2F%2F.%2Fpipe%2FdockerDesktopLinuxEngine/v1.51/version": 
open //./pipe/dockerDesktopLinuxEngine: The system cannot find the file specified.
```

**症状：**
- 运行 `docker compose up` 时出现上述错误
- 或运行 `docker ps` 时显示无法连接到 Docker 守护进程
- 或显示 500 Internal Server Error 和 dockerDesktopLinuxEngine 相关错误

**解决方法（按顺序尝试）：**

**方法 1：启动 Docker Desktop（最常见）**

1. **检查 Docker Desktop 是否运行：**
   - 查看任务栏右下角系统托盘
   - 查找 Docker 图标（鲸鱼图标）
   - 如果看不到图标，说明 Docker Desktop 未运行

2. **启动 Docker Desktop：**
   - 按 `Win` 键，搜索 "Docker Desktop"
   - 点击 "Docker Desktop" 启动
   - 等待 Docker Desktop 完全启动（通常需要 30-60 秒）
   - 看到任务栏图标不再闪烁，显示 "Docker Desktop is running" 时表示启动成功

3. **验证是否启动成功：**
   ```powershell
   docker ps
   ```
   如果显示容器列表（即使为空）或 "CONTAINER ID" 表头，说明连接成功。

**方法 2：以管理员权限运行 PowerShell**

如果 Docker Desktop 已运行但仍有权限问题：

1. **关闭当前 PowerShell 窗口**
2. **右键点击 PowerShell**（或 Windows Terminal）
3. **选择 "以管理员身份运行"**
4. **重新进入项目目录：**
   ```powershell
   cd E:\nofx\nofx-dev
   ```
5. **再次运行命令：**
   ```powershell
   docker compose up -d --build
   ```

**方法 3：检查 Docker Desktop 服务**

1. **打开服务管理器：**
   - 按 `Win + R`
   - 输入 `services.msc`
   - 按回车

2. **查找以下服务，确保它们都在运行：**
   - `Docker Desktop Service`
   - `com.docker.service`（如果存在）

3. **如果服务未运行：**
   - 右键点击服务
   - 选择 "启动"

4. **如果服务无法启动：**
   - 重启电脑
   - 或重新安装 Docker Desktop

**方法 4：检查 WSL 2（如果使用 WSL 2 后端）**

如果 Docker Desktop 设置为使用 WSL 2：

1. **检查 WSL 2 是否安装：**
   ```powershell
   wsl --list --verbose
   ```

2. **如果没有安装 WSL 2：**
   ```powershell
   # 以管理员身份运行 PowerShell
   wsl --install
   ```
   然后重启电脑

3. **更新 WSL 2：**
   ```powershell
   wsl --update
   ```

**方法 5：完全重启 Docker Desktop（针对 500 错误）**

**如果是错误 B（500 Internal Server Error 或 dockerDesktopLinuxEngine 错误）：**

这通常表示 Docker Desktop 的 Linux 引擎没有正确启动。按以下步骤操作：

1. **完全退出 Docker Desktop：**
   - 右键点击任务栏的 Docker 图标
   - 选择 "Quit Docker Desktop"
   - **等待 10-20 秒**确保完全退出
   - 检查任务管理器中是否还有 Docker 相关进程（如有，强制结束）

2. **等待几秒钟，然后重新启动：**
   - 从开始菜单启动 Docker Desktop
   - **耐心等待**：首次启动可能需要 1-2 分钟
   - 等待任务栏图标停止闪烁
   - 等待 Docker Desktop 窗口显示 "Engine running" 或类似消息

3. **验证引擎是否完全启动：**
   ```powershell
   # 等待 Docker Desktop 完全启动后再运行（至少 30 秒）
   docker version
   ```
   如果能看到 "Server" 部分（不仅仅是 Client），说明引擎已启动。

4. **再次测试：**
   ```powershell
   docker ps
   ```
   应该能正常显示容器列表（即使为空）。

**方法 6：重置 Docker Desktop 到默认设置**

如果重启仍然不行：

1. **打开 Docker Desktop**
2. **进入设置（Settings/⚙️）**
3. **点击 "Troubleshoot"（故障排查）标签**
4. **点击 "Clean / Purge data"（清理/清除数据）**
5. **选择 "Reset to factory defaults"（重置为出厂设置）**
6. **确认重置**
7. **重启 Docker Desktop**

**方法 7：检查 WSL 2 状态（如果使用 WSL 2 后端）**

如果 Docker Desktop 使用 WSL 2 后端：

1. **检查 WSL 2 状态：**
   ```powershell
   wsl --list --verbose
   ```
   应该能看到 `docker-desktop` 和 `docker-desktop-data` 发行版

2. **如果 WSL 2 发行版有问题，重启它们：**
   ```powershell
   wsl --shutdown
   ```
   等待 10 秒后，重启 Docker Desktop

3. **如果 WSL 2 发行版损坏，可能需要重新初始化：**
   ```powershell
   # ⚠️ 警告：这会删除所有 Docker 数据
   wsl --unregister docker-desktop
   wsl --unregister docker-desktop-data
   ```
   然后重启 Docker Desktop，它会自动重新创建 WSL 2 发行版

**快速诊断命令：**

运行以下命令来诊断问题：

```powershell
# 检查 Docker 版本（查看是否有 Server 部分）
docker version

# 检查 Docker 守护进程是否可访问
docker ps

# 检查 Docker Desktop 是否在运行
Get-Process "Docker Desktop" -ErrorAction SilentlyContinue

# 检查 Docker 服务状态
Get-Service -Name "*docker*" -ErrorAction SilentlyContinue

# 如果使用 WSL 2 后端，检查 WSL 2 状态
wsl --list --verbose

# 检查 Docker Desktop 的 WSL 2 发行版状态
wsl -d docker-desktop -- echo "Docker Desktop WSL 2 is working"
```

**诊断说明：**
- 如果 `docker version` 只显示 Client 部分，说明 Docker 引擎未启动
- 如果看到 "dockerDesktopLinuxEngine" 相关错误，说明 WSL 2 后端有问题
- 如果 `wsl --list --verbose` 看不到 docker-desktop，说明 WSL 2 发行版损坏

**如果仍然无法解决：**

1. **重新安装 Docker Desktop：**
   - 卸载 Docker Desktop
   - 从官网重新下载安装
   - https://www.docker.com/products/docker-desktop/

2. **检查系统要求：**
   - Windows 10 64-bit: Pro, Enterprise, or Education（Build 15063 或更高版本）
   - Windows 11 64-bit: Pro, Enterprise, or Education
   - 启用虚拟化功能（在 BIOS 中）
   - 启用 Hyper-V 或 WSL 2

---

### 问题 2：Docker 未安装或版本过低

**错误信息：**
```
docker: command not found
```

**解决方法：**
- 参考 [安装 Docker](#安装-docker如果未安装) 部分

### 问题 3：端口被占用

**错误信息：**
```
Error: port 8080 is already in use
```

**解决方法：**

**Windows:**
```powershell
# 查找占用端口的进程
netstat -ano | findstr :8080

# 结束进程（替换 PID 为实际进程号）
taskkill /PID <PID> /F
```

**macOS/Linux:**
```bash
# 查找占用端口的进程
lsof -i :8080

# 结束进程
kill -9 <PID>
```

**或者修改端口：**

编辑 `config.json`，修改 `api_server_port`：
```json
{
  "api_server_port": 8081  // 改为其他端口
}
```

并修改 `docker-compose.yml` 中的端口映射。

### 问题 4：配置文件未找到

**错误信息：**
```
config.json not found
```

**解决方法：**
```bash
# 确保在项目根目录
cd E:\nofx\nofx-dev

# 复制配置文件模板
Copy-Item config.json.example config.json  # Windows
# 或
cp config.json.example config.json  # macOS/Linux
```

### 问题 5：前端无法连接后端

**症状：**
- Web 界面可以打开，但显示 "无法连接到后端"
- 所有 API 请求失败

**解决方法：**

1. **检查后端是否运行：**
   ```bash
   docker compose ps
   ```
   确保 `nofx` 容器状态为 "Up"

2. **检查后端日志：**
   ```bash
   docker compose logs nofx
   ```
   查看是否有错误信息

3. **检查端口配置：**
   - 确保 `config.json` 中的 `api_server_port` 与 `docker-compose.yml` 中的端口映射一致
   - 默认应为 8080

4. **重启服务：**
   ```bash
   docker compose restart
   ```

### 问题 6：API 密钥验证失败

**症状：**
- 配置 AI 模型或交易所时显示 "API 密钥无效"

**解决方法：**

1. **检查 API 密钥格式：**
   - DeepSeek/Qwen：应以 `sk-` 开头
   - Binance API Key：通常是一串字符
   - 确保没有多余的空格或换行

2. **检查 API 密钥权限：**
   - Binance：确保启用了 "期货" 权限
   - DeepSeek/Qwen：确保账户有余额

3. **测试 API 密钥：**
   - 可以手动在浏览器或 Postman 中测试 API 密钥是否有效

### 问题 7：数据库初始化失败

**症状：**
- 启动时显示数据库相关错误

**解决方法：**

1. **检查数据库文件：**
   ```bash
   ls -la config.db  # macOS/Linux
   dir config.db     # Windows
   ```

2. **删除旧数据库重新初始化：**
   ```bash
   # 停止服务
   docker compose down
   
   # 删除数据库文件
   rm config.db  # macOS/Linux
   del config.db  # Windows
   
   # 重新启动
   docker compose up -d --build
   ```

### 问题 8：Docker 镜像下载失败

**症状：**
- 启动时卡在 "Pulling images" 或显示网络错误

**解决方法：**

1. **检查网络连接：**
   - 确保可以访问互联网
   - 如果在中国，可能需要配置 Docker 镜像源

2. **配置 Docker 镜像加速（中国用户）：**
   - 编辑 Docker Desktop 设置
   - 进入 "Docker Engine"
   - 添加镜像源：
     ```json
     {
       "registry-mirrors": [
         "https://docker.mirrors.ustc.edu.cn",
         "https://hub-mirror.c.163.com"
       ]
     }
     ```

3. **手动拉取镜像：**
   ```bash
   docker pull golang:latest
   docker pull node:18
   ```

### 问题 9：Windows 上 Docker Desktop 启动失败

**症状：**
- Docker Desktop 无法启动
- 显示 WSL 2 相关错误

**解决方法：**

1. **安装 WSL 2：**
   ```powershell
   # 以管理员身份运行 PowerShell
   wsl --install
   ```
   重启电脑后完成安装

2. **更新 WSL 2：**
   ```powershell
   wsl --update
   ```

3. **确保启用虚拟化：**
   - 在 BIOS 中启用虚拟化技术（VT-x/AMD-V）
   - 在 Windows 功能中启用 "Hyper-V" 或 "虚拟机平台"

---

## 下一步

部署成功后，您可以：

1. **查看实时交易**：在 Web 界面监控 AI 交易决策
2. **查看决策日志**：了解 AI 的思维过程
3. **调整配置**：根据市场情况调整杠杆、币种等
4. **创建多个交易员**：让不同的 AI 模型竞争

---

## 获取帮助

如果遇到其他问题：

1. **查看文档**：
   - [README.md](README.md) - 项目总览
   - [故障排查指南](docs/guides/TROUBLESHOOTING.zh-CN.md) - 详细故障排查
   - [Docker 部署文档](docs/getting-started/docker-deploy.zh-CN.md) - Docker 详细说明

2. **社区支持**：
   - GitHub Issues: https://github.com/tinkle-community/nofx/issues
   - Telegram 开发者社区: https://t.me/nofx_dev_community

3. **常用命令速查：**
   ```bash
   ./start.sh start --build    # 构建并启动
   ./start.sh stop             # 停止服务
   ./start.sh restart          # 重启服务
   ./start.sh logs             # 查看日志
   ./start.sh status           # 查看状态
   ```

---

🎉 **恭喜！您已成功部署 NOFX AI 交易系统！**

现在可以开始使用 AI 进行自动交易了。记住：
- ⚠️ **风险警告**：这是实验性系统，只使用您能承受损失的资金进行测试
- 📊 **建议从小额开始**：推荐 100-500 USDT 用于初始测试
- 👀 **定期监控**：密切关注系统运行状态和账户变化
- 📖 **学习决策过程**：通过查看 AI 决策日志了解其思考过程

祝您交易顺利！🚀

